<!DOCTYPE html>
<html>

<head>
    <title>Checkbox Select Dropdown</title>
    <script src="asstes/library/jquery-3.6.4.js"></script>
    <script src="asstes/library/bootstrap-4.0.0/bootstrap.min.js"></script>
    <script src="asstes/library/bootstrap-4.0.0/bootstrap.bundle.min.js"></script>
    <script src="asstes/library/Easy-Page-Element-Loader-Plugin-with-jQuery-loader-js/jquery.loader.js"></script>
    <script src="asstes/js/variable.js"></script>
    <script src="asstes/js/general.js"></script>
    <script src="asstes/js/validation-session.js"></script>
    <script src="asstes/js/import-header-footer.js"></script>
    <script src="asstes/js/validation.js"></script>
    <style>
        div.main-option-body {
            display: block;
            border: 1px solid black;
            border-radius: 5px;
            padding: 8px;
        }
    </style>
</head>

<body>
    <div class="fullMonthPerson">
        <div class=" main-option-body" id="selectedfullPerson">plese select full person</div>
        <div id="fullPersonOptions">
            <!-- <label><input type="checkbox" value="item1">Sandip Chavda</label><br>
            <label><input type="checkbox" value="item2">chavda Pradip</label><br>
            <label><input type="checkbox" value="item3">sunil mori</label><br>
            <label><input type="checkbox" value="item4">parth hadiyal</label><br> -->
        </div>
    </div>

    <div class="halfMonthPerson">
        <div class=" main-option-body" id="selectedhalfPerson">plese select half person</div>
        <div id="halfPersonOptions">
            <!-- <label><input type="checkbox" value="item1">Sandip Chavda</label><br>
            <label><input type="checkbox" value="item2">chavda Pradip</label><br>
            <label><input type="checkbox" value="item3">sunil mori</label><br>
            <label><input type="checkbox" value="item4">parth hadiyal</label><br> -->
        </div>
    </div>

    <div class="onVacationMonthPerson">
        <div class=" main-option-body" id="selectedonVacationPerson">plese select onVacation person</div>
        <div id="onVacationPersonOptions">
            <!-- <label><input type="checkbox" value="item1">Sandip Chavda</label><br>
            <label><input type="checkbox" value="item2">chavda Pradip</label><br>
            <label><input type="checkbox" value="item3">sunil mori</label><br>
            <label><input type="checkbox" value="item4">parth hadiyal</label><br> -->
        </div>
    </div>
    <script type="text/javascript" src="asstes/js/expense-api-call.js"></script>
    <script>
        // var getAllUser = window.localStorage.getItem('load-users');
        // if (getAllUser == "" || getAllUser == null) {
        //     loadUsername();
        // }
        const getAllUser = [
            { "id": 2, "fullName": "Dinesh Botadara", "email": null, "profilePhoto": null, "enabled": false },
            { "id": 5, "fullName": "Amit Mori", "email": null, "profilePhoto": null, "enabled": false },
            { "id": 7, "fullName": "Bhavin Hadiyal", "email": null, "profilePhoto": null, "enabled": false },
            { "id": 8, "fullName": "Pradip Chavda", "email": null, "profilePhoto": null, "enabled": false },
            { "id": 9, "fullName": "Gaurang Kanzariya", "email": null, "profilePhoto": null, "enabled": false },
            { "id": 10, "fullName": "Hadiyal Parth", "email": null, "profilePhoto": null, "enabled": false },
            { "id": 13, "fullName": "Sandip Chavda", "email": null, "profilePhoto": null, "enabled": false },
            { "id": 14, "fullName": "Sunil Mori", "email": null, "profilePhoto": null, "enabled": false },
            { "id": 15, "fullName": "Default User", "email": null, "profilePhoto": null, "enabled": false },
            { "id": 16, "fullName": "Ajay Kanzariya", "email": null, "profilePhoto": null, "enabled": false }
        ];
        // getAllUser = localStorage.getItem('load-users');
        var AllUserdata = [];
        getAllUser.forEach(person => {
            const simplifiedData = {
                fullName: person.fullName,
                id: person.id
            };
            AllUserdata.push(simplifiedData);
        });
        $("#fullPersonOptions").slideUp();
        $("#halfPersonOptions").slideUp();
        $("#onVacationPersonOptions").slideUp();
        dynamicallySetUserOnMonthType($('#fullPersonOptions'), AllUserdata);
        dynamicallySetUserOnMonthType($('#halfPersonOptions'), AllUserdata);
        dynamicallySetUserOnMonthType($('#onVacationPersonOptions'), AllUserdata);

        function dynamicallySetUserOnMonthType(setEle, Data) {
            var dataOnvacation = "";
           setEle.empty();
            Data.forEach(e => {
                dataOnvacation += `<label><input type="checkbox" value="${e.id}">${e.fullName}</label><br>`
            });
            setEle.append(dataOnvacation + "<hr>");
        }

    </script>



    <script>
        $("#selectedfullPerson").click(function () {
            $("#fullPersonOptions").slideToggle();
        });
        const fullPersonOptions = document.getElementById('fullPersonOptions');
        const selectedfullPerson = document.getElementById('selectedfullPerson');
        const fullpersonArray = [];

        fullPersonOptions.addEventListener('change', function () {
            const checkboxes = fullPersonOptions.querySelectorAll('input[type="checkbox"]:checked');

            fullpersonArray.length = 0;
            checkboxes.forEach(checkbox => {
                fullpersonArray.push(checkbox.value);
            });
            // AllUserdata = AllUserdata.filter(userId => !fullpersonArray.includes(userId.id));
            for (let i = AllUserdata.length - 1; i >= 0; i--) {
                if (fullpersonArray.includes(AllUserdata[i].id.toString())) {
                    AllUserdata.splice(i, 1);
                }
            }
            dynamicallySetUserOnMonthType($('#halfPersonOptions'), AllUserdata);
            dynamicallySetUserOnMonthType($('#onVacationPersonOptions'), AllUserdata);

            // if (fullpersonArray.length == 0) {
            //     selectedfullPerson.textContent = "plese select full person"
            // }
            // else {
            //     selectedfullPerson.textContent = fullpersonArray.join(', ');
            // }
        });

        $("#selectedhalfPerson").click(function () {
            $("#halfPersonOptions").slideToggle();
        });
        const halfPersonOptions = document.getElementById('halfPersonOptions');
        const selectedhalfPerson = document.getElementById('selectedhalfPerson');
        const halfpersonArray = [];

        halfPersonOptions.addEventListener('change', function () {
            const checkboxes = halfPersonOptions.querySelectorAll('input[type="checkbox"]:checked');

            halfpersonArray.length = 0;
            checkboxes.forEach(checkbox => {
                halfpersonArray.push(checkbox.value);
            });

            // AllUserdata = AllUserdata.filter(userId => !halfpersonArray.includes(userId));
            for (let i = AllUserdata.length - 1; i >= 0; i--) {
                if (halfpersonArray.includes(AllUserdata[i].id.toString())) {
                    AllUserdata.splice(i, 1);
                }
            }
            dynamicallySetUserOnMonthType($('#fullPersonOptions'), AllUserdata);
            dynamicallySetUserOnMonthType($('#onVacationPersonOptions'), AllUserdata);
            // if (halfpersonArray.length == 0) {
            //     selectedhalfPerson.textContent = "plese select half person"
            // }
            // else {
            //     selectedhalfPerson.textContent = halfpersonArray.join(', ');
            // }
        });

        $("#selectedonVacationPerson").click(function () {
            $("#onVacationPersonOptions").slideToggle();
        });
        const onVacationPersonOptions = document.getElementById('onVacationPersonOptions');
        const selectedonVacationPerson = document.getElementById('selectedonVacationPerson');
        const onVacationpersonArray = [];

        onVacationPersonOptions.addEventListener('change', function () {
            const checkboxes = onVacationPersonOptions.querySelectorAll('input[type="checkbox"]:checked');

            onVacationpersonArray.length = 0;
            checkboxes.forEach(checkbox => {
                onVacationpersonArray.push(checkbox.value);
            });
            // AllUserdata = AllUserdata.filter(userId => !onVacationpersonArray.includes(userId));
            for (let i = AllUserdata.length - 1; i >= 0; i--) {
                if (onVacationpersonArray.includes(AllUserdata[i].id.toString())) {
                    AllUserdata.splice(i, 1);
                }
            }
            dynamicallySetUserOnMonthType($('#fullPersonOptions'), AllUserdata);
            dynamicallySetUserOnMonthType($('#halfPersonOptions'), AllUserdata);
            // if (onVacationpersonArray.length == 0) {
            //     selectedonVacationPerson.textContent = "plese select onVacation person"
            // }
            // else {
            //     selectedonVacationPerson.textContent = onVacationpersonArray.join(', ');
            // }
        });

    </script>

    <script>

    </script>
</body>

</html>